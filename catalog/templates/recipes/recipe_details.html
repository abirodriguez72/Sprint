{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{{ recipe.title }} - Recipe Details</title>
    <link rel="stylesheet" type="text/css" href="{% static 'style.css' %}">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&family=Source+Sans+3:ital,wght@0,200..900;1,200..900&display=swap">
</head>
<body>
    <h1>{{ recipe.title }}</h1>
    <p><strong>By:</strong> <a href="{% url 'user_detail' recipe.user.user_id %}">{{ recipe.user.user_name }}</a></p>

    <h2>Ingredients</h2>
    <p>{{ recipe.ingredients }}</p>

    <h2>Instructions</h2>
    <p>{{ recipe.instructions }}</p>

    {% if recipe.notes %}
        <h3>Notes</h3>
        <p>{{ recipe.notes }}</p>
    {% endif %}

    {% if recipe.photo %}
        <img src="{{ recipe.photo.url }}" alt="Photo of {{ recipe.title }}">
    {% endif %}

    <h2>Reviews</h2>

    {% if recipe.average_rating %}
        <p>Average Rating: {{ recipe.average_rating|floatformat:1 }} stars</p>
    {% else %}
        <p>No ratings yet.</p>
    {% endif %}

    <ul>
        {% for review in reviews %}
            <li>
                <strong>{{ review.user.user_name }}</strong> rated this recipe {{ review.rating }} stars.
                {% if review.comment %}
                    <p>{{ review.comment }}</p>
                {% endif %}
                <p><em>Reviewed on {{ review.created_at|date:"M d, Y" }}</em></p>
            </li>
        {% empty %}
            <li>No reviews yet.</li>
        {% endfor %}
    </ul>

    <p><a href="{% url 'recipe_list' %}">Back to Recipe List</a></p>
</body>
</html>
